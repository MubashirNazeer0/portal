{% extends "dash/base.html" %}
{% block content %}
<div class="row justify-content-md-center">
    <div class="col-md-8">
        <main role="main" class="container">
            {% if user.profile.role == 'employer' %}
                <!-- FAQ Section -->
                {% comment %} <div id="faqs" class="faq-section">
                    <div class="text-center">
                        <h1 class="mb-5">FAQs</h1>
                    </div>
                    <div class="faq-content">
                        <p><strong>Q1:</strong> What are the conditions for field registration?</p>
                        <p><strong>A:</strong> The student must have completed more than 90 units.</p>
                        
                        <p><strong>Q2:</strong> What is the required rate for the field?</p>
                        <p><strong>A:</strong> A GPA of 2.2 and above is required.</p>
                        
                        <p><strong>Q3:</strong> How many units are needed to register for the field?</p>
                        <p><strong>A:</strong> 90 units and above.</p>
                        
                        <p><strong>Q4:</strong> How many hours is the field training?</p>
                        <p><strong>A:</strong> 4 hours a day.</p>
                        
                        <p><strong>Q5:</strong> What are the field training days for the first and second semesters?</p>
                        <p><strong>A:</strong> Sunday, Tuesday, and Thursday.</p>
                        
                        <p><strong>Q6:</strong> What are the field training days in the summer semester?</p>
                        <p><strong>A:</strong> All days of the week.</p>
                    </div>
                </div> {% endcomment %}
            {% else %}
                {% for post in posts %}
                    <article class="media content-section">
                        <img class="rounded-circle article-img" src="{{ post.author.profile.image.url }}" alt="Profile Pic">
                        <div class="media-body">
                            <div class="article-metadata">
                                <a class="mr-2" href="{% url 'user_profile' post.author.id %}">{{ post.author }}</a>
                                <small class="text-muted">{{ post.date_posted|date:"F d, Y" }}</small>
                            </div>
                            <h2><a class="article-title" href="{% url 'post-detail' post.id %}">{{ post.title }}</a></h2>
                            {% comment %} <p class="article-image">{{ post.content }}</p> {% endcomment %}
                            <img src="{{ post.content.url }}" alt="Post Image" style="width: 100%; max-height: 300px; object-fit: cover; margin-top: 15px;">

                        </div>
                    </article>
                {% endfor %}
            {% endif %}
        </main>
    </div>
</div>
    <!-- Search Bar for Employers -->
    {% if user.is_authenticated and user.profile.role == 'employer' %}
    {% comment %} <div class="search-bar-container p-3">
        <form action="{% url 'search-users' %}" method="GET">
            <div class="form-group">
                <input class="form-control" type="text" name="cgpa" placeholder="CGPA" value="{{ request.GET.cgpa }}">
            </div>
            <div class="form-group">
                <select class="form-control" name="dept">
                    <option value="">Department</option>
                    {% for value, label in user.profile.DEPT_CHOICES %}
                    <option value="{{ value }}" {% if request.GET.dept == value %}selected{% endif %}>{{ label }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <input class="form-control" type="text" name="current_job" placeholder="Current Job" value="{{ request.GET.current_job }}">
            </div>
            <div class="form-group">
                <input class="form-control" type="text" name="current_company" placeholder="Current Company" value="{{ request.GET.current_company }}">
            </div>
            <div class="form-group">
                <input class="form-control" type="text" name="roll_no" placeholder="Roll No" value="{{ request.GET.roll_no }}">
            </div>
            <button class="btn btn-primary w-100" type="submit">Search</button>
        </form>
    </div> {% endcomment %}
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#searchModal" 
    style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 2rem; padding: 1.5rem 3rem; background:  #040a45; border: none; box-shadow: 0 4px 6px rgba(255, 255, 255, 0.1); transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;">
Search
</button>

<!-- Modal Structure -->
<div class="modal fade" id="searchModal" tabindex="-1" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="searchModalLabel">Search</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form action="{% url 'search-users' %}" method="GET">
                    <div class="form-group mb-3">
                        <input class="form-control" type="text" name="cgpa" placeholder="CGPA" value="{{ request.GET.cgpa }}">
                    </div>
                    <div class="form-group mb-3">
                        <select class="form-control" name="dept">
                            <option value="">Department</option>
                            {% for value, label in user.profile.DEPT_CHOICES %}
                            <option value="{{ value }}" {% if request.GET.dept == value %}selected{% endif %}>{{ label }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group mb-3">
                        <input class="form-control" type="text" name="current_job" placeholder="Current Job" value="{{ request.GET.current_job }}">
                    </div>
                    <div class="form-group mb-3">
                        <input class="form-control" type="text" name="current_company" placeholder="Current Company" value="{{ request.GET.current_company }}">
                    </div>
                    <div class="form-group mb-3">
                        <input class="form-control" type="text" name="roll_no" placeholder="Roll No" value="{{ request.GET.roll_no }}">
                    </div>
                    <button class="btn btn-primary w-100" type="submit">Search</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endif %}
<style>

    .btn-primary {
        background: #040a45;
        border: none;
        font-size: 1.25rem;
        padding: 0.75rem 1.5rem;
        box-shadow: 0 4px 6px rgba(36, 2, 94, 0.1);
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }
    .btn-primary:hover {
        color:white;
        transform: translateY(-2px);
        box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
    }

</style>
{% endblock content %}
